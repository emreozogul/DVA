<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Viability Analysis</title>
    <script src="./js/jquery.js"></script>
    <script src="./js/cropper.js" type="module"></script>
    <link rel="stylesheet" href="./css/cropper.css">
    <link rel="stylesheet" href="./css/importPage.css">
    <link rel="stylesheet" href="./css/projectPage.css">

    <script type="text/javascript" src="/eel.js"></script>


    <link rel="stylesheet" href="./css/style.css">
 

    <script src="./js/index.js" ></script>    
    <!-- Include other scripts and stylesheets as needed -->
    <style>
        .container {
          margin: 20px auto;
          max-width: 640px;
        }
        .img-container img {
          max-width: 100%;
          display: none; /* Initially hide the image */
        }
      </style>
    <script>
        var cropper;
        window.addEventListener('DOMContentLoaded', function () {
            var image = document.getElementById('image');
            var fileInput = document.getElementById('fileInput');
    
            var cropper;
    
            fileInput.onchange = function (e) {
            var files = e.target.files;
            var reader = new FileReader();
            reader.onload = function (e) {
              image.src = e.target.result;
              image.style.display = 'block'; // Show the image
    
              if (cropper) {
                cropper.destroy(); // Destroy the old cropper instance
              }
              image.onload = function () {
                cropper = new Cropper(image, {
                    aspectRatio: 1 / 1,
                    background: false,
                    highlight: false,
                    zoomable: false,
                    zoomOnTouch: false,
                    zoomOnWheel: false,
                  }
                 );
                };
            };
            if (files && files.length > 0) {
              reader.readAsDataURL(files[0]);
              console.log(files[0]);
            }
          };
        });
      
        

    </script>

</head>
<body class="app">
    <div class="sidebar" id="sidebar">
        <div href="javascript:void(0)" id="closebtn" class="closebtn" >×</div>
        <div class="navContainer">
            <div id="HomeNav"  class="navItem" data-section="Home" >Home</div>
            <div id="ImageNav"  class="navItem" data-section="Import" >Import</div>
            <div id="ProjectNav"  class="navItem" data-section="Project" >Project</div>
            <div id="CropNav"  class="navItem" data-section="Crop" >Crop</div>

        </div>
        <div style="display: flex; align-items:center ; justify-content: center;"> 
            <div id="HelpNav" onclick="openModal('help');">
                <svg width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier"> 
                        <path d="M12 17H12.01M12 14C12.8906 12.0938 15 12.2344 15 10C15 8.5 14 7 12 7C10.4521 7 9.50325 7.89844 9.15332 9M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> 
                    </g>
                </svg>   
            </div>
        </div>
    </div>
    <div id="openbtn" class="openbtn" >☰ </div>  
    <div class="page" id="Home">
        <div>
            <h2>Dynamic Viability Analysis</h2>
            <p>Click on the hamburger menu/bar icon to open the sidebar, and push this content to the right.</p>
            
        </div>
    </div>
    <div class="page" id="Import" style="display: none;">
        <div id="importPage1" class="section" >
            <div class="buttonContainer">
                <div  style="flex: 1 ; width:100%"></div>
                <div  style="display: flex ; flex-direction:row; gap: 4px;">
                    <div class="button normal" id="nextBtnImport" >
                        <span>Next</span>
                        <svg width="36px" height="36px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier"> 
                                <g id="Arrow / Chevron_Right_MD"> 
                                    <path id="Vector" d="M10 8L14 12L10 16" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> 
                                </g> 
                            </g>
                    </svg>
                    </div>
                </div>
            </div>
            <div class="section-remaining">
                <div class="importForm">
                    <div class="row">
                        <p> Author</p>
                        <input type="text"  id="projectName"/>
                    </div>
                    <div class="row">
                        <p>Project </p>
                        <div class="custom-select" style="display: flex; align-items:center;gap: 8px;" >
                            <select class="project-select-import">
                                <option value="">Select project</option>
                            </select>
                            <div class="button small" >
                                <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                    <g id="SVGRepo_iconCarrier"> <path d="M4 12H20M12 4V20" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> 
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <p>Phase Quantity</p>
                        <div class="choicebox">
                            <label class="choicebox-container">2
                                <input type="radio" name="radio" value="2">
                                <span class="checkmark"></span>
                            </label>
                            <label class="choicebox-container">3
                                <input type="radio" name="radio" value="3">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="" id="phaseUpload" >

                </div>
            </div>


        </div>
        
        <div id="importPage2" class="section" style="display: none;">
            <div class="buttonContainer">
                <div  style="flex: 1 ; width:100%"></div>
                <div  style="display: flex ; flex-direction:row; gap: 4px;">
                    <div class="button normal" id="prevBtnImport">
                        <svg width="36px" height="36px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(180)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="Arrow / Chevron_Right_MD"> <path id="Vector" d="M10 8L14 12L10 16" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g> </g></svg>
                        <span>Prev</span>
                    </div>
                </div>
            </div>
            


        </div>
    </div>
    <div class="page" id="Project" style="display: none;">
        <div id="projectPage1" class="section" >
            <div class="buttonContainer">
                <div  style="flex: 1 ; width:100%"></div>
                <div  style="display: flex ; flex-direction:row; gap: 4px;">
                    <div class="button normal" id="sNewProjectBtn" >
                        <span>Add new project</span>
                    </div>
                </div>
            </div>
            <div>
                <ul class="project-list" id="projects">

                </ul>
            </div>
            
        </div>
        <div id="projectPage2" class="section" style="display: none;">
            <div class="buttonContainer">
                <div  style="flex: 1 ; width:100%"></div>
                <div  style="display: flex ; flex-direction:row; gap: 4px;">
                    <div class="button normal" id="sProjectListBtn">
                        <span>Project List</span>
                    </div>
                </div>
            </div>
            <form id="addProjectForm">
                <div class="row">
                    <p> Owner</p>
                    <input type="text"  id="authorAdd"/>
                </div>
                <div class="row">
                    <p>Project Name</p>
                    <input type="text" id="projectNameAdd" />
                </div>
                <button type="submit" class="button normal" id="addProject" >
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                    </svg>
                    <span>Add Project</span>
                </button>
            </form>
        </div>
    </div>
    <div class="page" id="Crop" style="display: none;">
        <div class="buttonContainer" style="justify-content: center; align-items:center;">
            <div style="display: flex ; flex-direction:row; gap: 4px;">
                <div class="button small" id="rotateLeftButton" onclick="rotateLeft()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 24 24" fill="none">
                        <path d="M11.5 20.5C6.80558 20.5 3 16.6944 3 12C3 7.30558 6.80558 3.5 11.5 3.5C16.1944 3.5 20 7.30558 20 12C20 13.5433 19.5887 14.9905 18.8698 16.238M22.5 15L18.8698 16.238M17.1747 12.3832L18.5289 16.3542L18.8698 16.238" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="button small" id="cropButton" onclick="cropImage()">
                    <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" transform="matrix(1, 0, 0, 1, 0, 0)">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier"> 
                            <path d="M6 3V14.8C6 15.9201 6 16.4802 6.21799 16.908C6.40973 17.2843 6.71569 17.5903 7.09202 17.782C7.51984 18 8.0799 18 9.2 18H15M21 18H18M18 21V9.2C18 8.0799 18 7.51984 17.782 7.09202C17.5903 6.71569 17.2843 6.40973 16.908 6.21799C16.4802 6 15.9201 6 14.8 6H9M3 6H6M7 17L21 3" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> 
                        </g>
                    </svg>
                </div>
                <div class="button small" id="saveButton" onclick="saveImage()">
                    <svg width="36px" height="36px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier"> 
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M6.75 6L7.5 5.25H16.5L17.25 6V19.3162L12 16.2051L6.75 19.3162V6ZM8.25 6.75V16.6838L12 14.4615L15.75 16.6838V6.75H8.25Z" fill="#ffffff"></path> 
                        </g>
                    </svg>    
                </div>
                <div class="button small" id ="resetButton" onclick="cancelCrop()">
                    <svg fill="#ffffff" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path d="M7.004 23.087l7.08-7.081-7.07-7.071L8.929 7.02l7.067 7.069L23.084 7l1.912 1.913-7.089 7.093 7.075 7.077-1.912 1.913-7.074-7.073L8.917 25z"></path>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div class="container">
            <button onclick="triggerFileSelectionAndProcessing()">Select and Process Image</button>
            <div class="img-container">
              <img id="image" src="" alt="Picture">
            </div>
        </div>
    </div>
    
</body>
</html>
